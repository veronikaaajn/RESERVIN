<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#63b9f3">
    
    <!-- PWA Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Reservin">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- Description -->
    <meta name="description" content="Platform reservasi restoran dan cafe terpercaya di Solo. Booking meja favoritmu dengan mudah, cepat, dan praktis.">
    <meta name="keywords" content="reservasi, restoran, cafe, solo, booking, makan, kuliner">
    <meta name="author" content="Reservin Team">
    
    <title>Reservin - Reservasi Restoran & Cafe Solo</title>
    
    <!-- Favicon -->
    <link rel="icon" href="logo/logo5.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json"/>
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="logo/logo6.png">
    <link rel="apple-touch-icon" sizes="152x152" href="logo/logo6.png">
    <link rel="apple-touch-icon" sizes="180x180" href="logo/logo6.png">
    <link rel="apple-touch-icon" sizes="167x167" href="logo/logo6.png">
    
    <!-- Android Chrome -->
    <link rel="icon" sizes="192x192" href="logo/logo6.png">
    <link rel="icon" sizes="512x512" href="logo/logo5.png">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- Google Fonts - Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #63b9f3;
            --secondary: #000000;
            --success: #FEEE91;
            --danger: #ED3F27;
            --light: #ffffff;
            --dark: #000000;
            --text-light: #000000;
            --text-dark: #ffffff;
            --bg-light: #f8f9fa;
            --bg-dark: #1a1a1a;
            --card-light: #ffffff;
            --card-dark: #2a2a2a;
        }
        
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        body {
        padding-top: 70px;
        }

        @media (max-width: 576px) {
        body {
        padding-top: 60px;
        }
        }
        
        body.dark-mode {
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }
        
        body.dark-mode .card {
            background-color: var(--card-dark);
            color: var(--text-dark);
            border-color: #444;
        }
        
        .navbar {
            background-color: var(--primary) !important;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        body.dark-mode .modal-content {
            background-color: var(--card-dark);
            color: var(--text-dark);
        }
        
        body.dark-mode .form-control,
        body.dark-mode .form-select {
            background-color: #333;
            color: #fff;
            border-color: #555;
        }
        
        body.dark-mode .form-control:focus,
        body.dark-mode .form-select:focus {
            background-color: #444;
            color: #fff;
            border-color: var(--primary);
        }
        
        body.dark-mode .text-muted {
            color: #aaa !important;
        }
        
        body.dark-mode .btn-close {
            filter: invert(1);
        }
        
        body.dark-mode .carousel-caption {
            background-color: rgba(0, 0, 0, 0.7);
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 2rem;
            color: white !important;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .navbar-brand i {
            font-size: 2.5rem;
        }
        
        /* Default (MODE SIANG) */
        .nav-link {
            color: var(--text-light);
            font-weight: 500;
            transition: all 0.3s;
            margin: 0 5px;
        }

        /* MODE GELAP */
        body.dark-mode .nav-link {
            color: white;
        }
        
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
        }
        
        .btn-primary:hover {
            background-color: #028a8a;
            border-color: #028a8a;
        }
        
        .btn-danger {
            background-color: var(--danger);
            border-color: var(--danger);
        }
        
        .btn-success {
            background-color: var(--success);
            border-color: var(--success);
            color: var(--secondary);
        }
        
        .carousel-item img {
            height: 500px;
            object-fit: cover;
            border-radius: 10px;
        }
        
        .restaurant-card {
            transition: transform 0.3s;
            cursor: pointer;
            margin-bottom: 20px;
            height: 100%;
        }
        
        .restaurant-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .restaurant-card img {
            height: 320px;
            width: 100%;
            object-fit: cover;
            border-radius: 10px 10px 0 0;
        }
        
    .detail-carousel {
    aspect-ratio: 1 / 2;
    object-fit: cover;
    border-radius: 10px;
    width: 100%;
}
        
        .carousel-inner {
            border-radius: 10px;
        }
        
        .tab-content {
            min-height: 400px;
        }
        
        .booking-card {
            border-left: 4px solid var(--primary);
        }
        
        .booking-card.completed {
            border-left-color: var(--success);
        }
        
        .booking-card.cancelled {
            border-left-color: var(--danger);
        }
        
        .qr-code {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0;
            border: 2px dashed #ccc;
            border-radius: 10px;
        }
        
        body.dark-mode .qr-code {
            background: #333;
            border-color: #555;
        }
        
        .profile-img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 50%;
            border: 4px solid var(--primary);
        }
        
        .search-btn {
            background-color: white;
            border: none;
            color: var(--primary);
        }
        
        .search-btn:hover {
            background-color: var(--success);
            color: var(--secondary);
        }
        
        .dark-mode-btn {
            background-color: white;
            border: none;
            color: var(--primary);
            margin-left: 5px;
        }
        
        .dark-mode-btn:hover {
            background-color: var(--success);
            color: var(--secondary);
        }
        
        body.dark-mode .search-btn,
        body.dark-mode .dark-mode-btn {
            background-color: #333;
            color: white;
        }
        
        body.dark-mode .search-btn:hover,
        body.dark-mode .dark-mode-btn:hover {
            background-color: var(--primary);
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .badge-custom {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .auth-container {
            max-width: 450px;
            margin: 50px auto;
            padding: 30px;
        }
        
        .logo-auth {
            font-size: 3.5rem;
            color: var(--primary);
            font-weight: 700;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .nav-pills .nav-link {
            color: #000000;
            border: 2px solid var(--primary);
            margin: 0 5px;
            font-weight: 500;
        }
        
        .nav-pills .nav-link.active {
            background-color: var(--primary);
            color: white;
        }
        
        body.dark-mode .nav-pills .nav-link {
            color: var(--primary);
            border-color: var(--primary);
        }
        
        body.dark-mode .nav-pills .nav-link.active {
            background-color: var(--primary);
            color: white;
        }
        
        .navbar-toggler {
            border-color: white;
        }
        
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(255, 255, 255, 1)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
        
        .detail-page {
            background-color: var(--bg-light);
            min-height: 100vh;
            padding: 20px 0;
        }
        
        body.dark-mode .detail-page {
            background-color: var(--bg-dark);
        }
        
        .detail-page .card {
            margin-bottom: 20px;
        }
        
        .back-btn {
            margin-bottom: 20px;
        }
        
        body.dark-mode .btn-outline-primary {
            color: var(--primary);
            border-color: var(--primary);
        }
        
        body.dark-mode .btn-outline-primary:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .nav-tabs .nav-link {
            color: var(--text-light);
        }
        
        body.dark-mode .nav-tabs .nav-link {
            color: var(--text-dark);
        }
        
        .nav-tabs .nav-link.active {
            color: var(--primary);
            background-color: transparent;
            border-color: var(--primary) var(--primary) transparent;
        }
        
        body.dark-mode .nav-tabs {
            border-bottom-color: #444;
        }
        
        body.dark-mode .nav-tabs .nav-link {
            border-color: transparent;
        }
        
        body.dark-mode .nav-tabs .nav-link.active {
            color: var(--primary);
            background-color: var(--card-dark);
            border-color: #444 #444 var(--card-dark);
        }
        
        .card-title,
        .card-text {
            color: inherit;
        }
        
        body.dark-mode .card-title,
        body.dark-mode .card-text {
            color: var(--text-dark);
        }
        
        small {
            color: inherit;
        }
        
        body.dark-mode small {
            color: #aaa;
        }
        
        h5 {
            color: inherit;
        }
        
        body.dark-mode h5 {
            color: var(--text-dark);
        }
        
        .navbar {
            height: 70px;    
            padding-top: 0;
            padding-bottom: 0;
        }

        .navbar .container-fluid {
            height: 100%;
            display: flex;
            align-items: center;
        }

        .logo-img {
            max-height: 100px;
            height: auto;
            width: auto;
            object-fit: contain;
        }

        .logo-utama {
            max-height: 150px;
        }

        /* Warna khusus navbar di halaman welcome */
body.welcome-mode .navbar {
    background: linear-gradient(135deg, #65d7eb 0%, #6ca7eb 100%) !important;
}

        /* Welcome Page Styles */
        #welcomePage {
            padding-top: 0;
        }

        .welcome-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: linear-gradient(135deg, #ffffff 0%, #ffffff 100%);
            padding: 0;
        }

        body.dark-mode .welcome-container {
            background: linear-gradient(135deg, #028a8a 0%, #026a6a 100%);
        }

          .welcome-logo {
    max-width: 250px;
    width: 100%;
    height: auto;
    display: block;
    margin: 0 auto 24px;


    /* HILANGKAN EFEK TAMBAHAN */
    border-radius: 0;
    box-shadow: none;
    background: none;
    padding: 0;
}


        .welcome-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            text-align: center;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .welcome-title {
            color: rgb(80, 80, 79);
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .welcome-description {
            color: rgba(80,80,79,0.95);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 40px;
            line-height: 1.8;
        }

        .welcome-features {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            max-width: 800px;
        }

        .feature-item {
            background: rgba(209, 229, 151, 0.15);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            color: rgb(80, 80, 79);
            min-width: 200px;
            transition: transform 0.3s;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.25);
        }

        .feature-item i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: block;
        }

        .btn-start {
            background-color: white;
            color: var(--primary);
            font-size: 1.3rem;
            font-weight: 600;
            padding: 15px 60px;
            border-radius: 50px;
            border: none;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            transition: all 0.3s;
            animation: pulse 2s infinite;
        }

        .btn-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.3);
            background-color: var(--success);
            color: var(--secondary);
        }

        .welcome-footer {
            text-align: center;
            padding: 30px 20px;
            color: rgba(80,80,79,0.8);
            font-size: 0.9rem;
            animation: fadeIn 1s ease-out 0.6s both;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @media (max-width: 768px) {
            .welcome-title {
                font-size: 2rem;
            }

            .welcome-description {
                font-size: 1rem;
            }

            .welcome-features {
                flex-direction: column;
                align-items: center;
            }

            .feature-item {
                width: 100%;
                max-width: 300px;
            }
        }

/* Logo lebih besar di halaman home (opsional) */
#homePage .logo-img {
    max-height: 200px;
}
    </style>
</head>
<body>

    <!-- Welcome Page -->
    <div id="welcomePage" class="page active">
        <div class="welcome-container">
            <div class="welcome-header">
                <img src="logo/logo5.png" class="welcome-logo">
            </div>

            <div class="welcome-body">
                <h1 class="welcome-title">Selamat Datang di Reservin</h1>
                <p class="welcome-description">
                    Platform reservasi restoran dan cafe terpercaya di Solo. 
                    Booking meja favoritmu dengan mudah, cepat, dan praktis. 
                    Nikmati pengalaman kuliner tanpa antrian!
                </p>

                <div class="welcome-features">
                    <div class="feature-item">
                        <i class="bi bi-lightning-charge-fill"></i>
                        <strong>Booking Cepat</strong>
                        <p class="mb-0" style="font-size: 0.9rem;">Reservasi dalam hitungan detik</p>
                    </div>
                    <div class="feature-item">
                        <i class="bi bi-shield-check"></i>
                        <strong>Terpercaya</strong>
                        <p class="mb-0" style="font-size: 0.9rem;">Konfirmasi real-time</p>
                    </div>
                    <div class="feature-item">
                        <i class="bi bi-star-fill"></i>
                        <strong>50+ Tempat</strong>
                        <p class="mb-0" style="font-size: 0.9rem;">Restoran & cafe pilihan</p>
                    </div>
                </div>

                <button class="btn btn-start" onclick="goToLogin()">
                    <i class="bi bi-arrow-right-circle me-2"></i>Mulai Sekarang
                </button>
            </div>

            <div class="welcome-footer">
                <p class="mb-0">&copy; 2025 Reservin. All rights reserved.</p>
                <p class="mb-0"><small>Made with <i class="bi bi-heart-fill text-danger"></i> in Solo</small></p>
            </div>
        </div>
    </div>

    <!-- Offline Page -->
<div id="offlinePage" class="page">
    <div class="d-flex flex-column justify-content-center align-items-center"
         style="min-height:100vh; text-align:center; padding:20px;">
        
        <i class="bi bi-wifi-off" style="font-size:5rem; color:#ED3F27;"></i>

        <h2 class="mt-4">Koneksi Terputus</h2>
        <p class="text-muted">
            Tidak ada koneksi internet.<br>
            Periksa jaringan Anda dan coba lagi.
        </p>

        <button class="btn btn-primary mt-3" onclick="checkConnection()">
            Coba Lagi
        </button>
    </div>
</div>

    <!-- Navbar -->
    <nav id="mainNavbar" class="navbar navbar-expand-lg fixed-top">
    <div class="container-fluid">

        <!-- LOGO -->
        <a class="navbar-brand mx- o" href="#">
            <img src="logo/logo1.jpg" alt="Logo" class="logo-img">
        </a>

        <!-- MENU NAVBAR -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item">
                    <a class="nav-link" onclick="showPage('home')">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showPage('mybooking')">My Booking</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" onclick="showPage('profile')">Profile</a>
                </li>
            </ul>

            <div class="d-flex align-items-center">
                <button class="btn search-btn" onclick="showSearchModal()">
                    <i class="bi bi-search"></i>
                </button>
                <button class="btn dark-mode-btn" onclick="toggleDarkMode()">
                    <i class="bi bi-moon-fill"></i>
                </button>
            </div>
        </div>
    </div>
</nav>

    <!-- Login Page -->
    <div id="loginPage" class="page">
        <div class="auth-container">
            <div class="card shadow">
                <div class="card-body">
                    <div class="logo-auth">
                        <img src="logo/logo1.jpg" alt="Logo" class="logo-img">
                    </div>
                    <h4 class="text-center mb-4">Masuk ke Akun Anda</h4>
                    <form id="loginForm"> 
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="loginEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="loginPassword" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">Ingat Saya</label>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mb-2">Masuk</button>
                        <button type="button" class="btn btn-link w-100 mb-2" onclick="showForgotPassword()">Lupa Password?</button>
                        <hr>
                        <button type="button" class="btn btn-outline-primary w-100" onclick="showRegisterPage()">
                            Daftar Akun Baru
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="page">
        <div class="auth-container">
            <div class="card shadow">
                <div class="card-body">
                    <div class="logo-auth">
                        <i class="bi bi-calendar-check"></i><br>Reservin
                    </div>
                    <h4 class="text-center mb-4">Daftar Akun Baru</h4>
                    <form id="registerForm">
                        <div class="mb-3">
                            <label class="form-label">Nama Lengkap</label>
                            <input type="text" class="form-control" id="regName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="regEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nomor Telepon</label>
                            <input type="tel" class="form-control" id="regPhone" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password (Min. 6 karakter)</label>
                            <input type="password" class="form-control" id="regPassword" required minlength="6">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Konfirmasi Password</label>
                            <input type="password" class="form-control" id="regConfirmPassword" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mb-2">Daftar</button>
                        <button type="button" class="btn btn-link w-100" onclick="showLoginPage()">
                            Sudah punya akun? Masuk
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Home Page -->
    <div id="homePage" class="page">
        <div class="container mt-4">
            <!-- Carousel Promo -->
            <div id="promoCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#promoCarousel" data-bs-slide-to="0" class="active"></button>
                    <button type="button" data-bs-target="#promoCarousel" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#promoCarousel" data-bs-slide-to="2"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=800&h=400&fit=crop" class="d-block w-100" alt="Promo 1">
                        <div class="carousel-caption">
                            <h5>Diskon 30% untuk Member Baru!</h5>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800&h=400&fit=crop" class="d-block w-100" alt="Promo 2">
                        <div class="carousel-caption">
                            <h5>Gratis Dessert Setiap Weekend</h5>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=400&fit=crop" class="d-block w-100" alt="Promo 3">
                        <div class="carousel-caption">
                            <h5>Happy Hour 15:00 - 17:00</h5>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#promoCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon"></span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#promoCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon"></span>
                </button>
            </div>

            <!-- Tabs Resto & Cafe -->
            <ul class="nav nav-pills mb-4 justify-content-center" id="categoryTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="all-tab" data-bs-toggle="pill" data-bs-target="#all" type="button">
                        Semua
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="restaurant-tab" data-bs-toggle="pill" data-bs-target="#restaurant" type="button">
                        Restoran
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="cafe-tab" data-bs-toggle="pill" data-bs-target="#cafe" type="button">
                        Cafe
                    </button>
                </li>
            </ul>

            <!-- Rekomendasi Section -->
            <h5 class="mb-3"><i class="bi bi-fire"></i> Populer 7 Hari Terakhir</h5>
            
            <div class="tab-content" id="categoryTabContent">
                <div class="tab-pane fade show active" id="all" role="tabpanel">
                    <div class="row" id="allPlaces"></div>
                </div>
                <div class="tab-pane fade" id="restaurant" role="tabpanel">
                    <div class="row" id="restaurantList"></div>
                </div>
                <div class="tab-pane fade" id="cafe" role="tabpanel">
                    <div class="row" id="cafeList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Page -->
    <div id="detailPage" class="page detail-page">
        <div class="container">
            <button class="btn btn-outline-primary back-btn" onclick="backToHome()">
                <i class="bi bi-arrow-left">Kembali</i>
            </button>
            
            <div class="card shadow">
                <div class="card-body">
                    <div id="detailCarousel" class="carousel slide mb-3" data-bs-ride="carousel">
                        <div class="carousel-inner" id="detailCarouselInner"></div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#detailCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#detailCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon"></span>
                        </button>
                    </div>
                    <div id="detailContent"></div>
                    <button type="button" class="btn btn-primary w-100 mt-3" onclick="showBookingForm()">
                        <i class="bi bi-calendar-check"></i> Reservasi Sekarang
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- My Booking Page -->
    <div id="mybookingPage" class="page">
        <div class="container mt-4">
            <h4 class="mb-4">Booking Saya</h4>
            
            <ul class="nav nav-tabs mb-4" id="bookingTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="upcoming-tab" data-bs-toggle="tab" data-bs-target="#upcoming" type="button">
                        Akan Datang
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="completed-tab" data-bs-toggle="tab" data-bs-target="#completed" type="button">
                        Selesai
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="cancelled-tab" data-bs-toggle="tab" data-bs-target="#cancelled" type="button">
                        Dibatalkan
                    </button>
                </li>
            </ul>

            <div class="tab-content" id="bookingTabContent">
                <div class="tab-pane fade show active" id="upcoming" role="tabpanel">
                    <div id="upcomingBookings"></div>
                </div>
                <div class="tab-pane fade" id="completed" role="tabpanel">
                    <div id="completedBookings"></div>
                </div>
                <div class="tab-pane fade" id="cancelled" role="tabpanel">
                    <div id="cancelledBookings"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Page -->
    <div id="profilePage" class="page">
        <div class="container mt-4">
            <div class="card shadow">
                <div class="card-body text-center">
                    <img src="https://ui-avatars.com/api/?name=User&size=120&background=03A6A6&color=fff" class="profile-img mb-3" id="profileImage" alt="Profile">
                    <h4 id="profileName">-</h4>
                    <p class="text-muted" id="profileEmail">-</p>
                    <p class="text-muted" id="profilePhone">-</p>
                    <button class="btn btn-primary mb-2" onclick="showEditProfile()">
                        <i class="bi bi-pencil"></i> Edit Profile
                    </button>
                </div>
            </div>

            <div class="card shadow mt-3">
                <div class="card-body">
                    <h5 class="card-title mb-3">Pengaturan</h5>
                    
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <i class="bi bi-bell"></i> Notifikasi
                        </div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="notifSwitch" checked>
                        </div>
                    </div>
                    
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <i class="bi bi-translate"></i> Bahasa
                        </div>
                        <select class="form-select w-auto" id="languageSelect">
                            <option value="id">Indonesia</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                    
                    <hr>
                    
                    <button class="btn btn-danger w-100" onclick="logout()">
                        <i class="bi bi-box-arrow-right"></i> Logout
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="modal fade" id="searchModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Cari Restoran / Cafe</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="text" class="form-control mb-3" id="searchInput" placeholder="Ketik nama restoran atau cafe...">
                    <div id="searchResults"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Form Modal -->
    <div class="modal fade" id="bookingModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Form Reservasi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="bookingForm">
                        <input type="hidden" id="bookingPlaceId">
                        <div class="mb-3">
                            <label class="form-label">Nama Restoran/Cafe</label>
                            <input type="text" class="form-control" id="bookingPlaceName" readonly>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Tanggal</label>
                            <input type="date" class="form-control" id="bookingDate" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Waktu</label>
                            <input type="time" class="form-control" id="bookingTime" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Jumlah Orang</label>
                            <input type="number" class="form-control" id="bookingPeople" min="1" max="20" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Catatan Khusus (Opsional)</label>
                            <textarea class="form-control" id="bookingNotes" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Konfirmasi Reservasi</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Detail Modal -->
    <div class="modal fade" id="bookingDetailModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detail Booking</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="bookingDetailContent"></div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal fade" id="editProfileModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editProfileForm">
                        <div class="mb-3">
                            <label class="form-label">Nama Lengkap</label>
                            <input type="text" class="form-control" id="editName" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="editEmail" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nomor Telepon</label>
                            <input type="tel" class="form-control" id="editPhone" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Simpan Perubahan</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal fade" id="forgotPasswordModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Lupa Password</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="forgotPasswordForm">
                        <div class="mb-3">
                            <label class="form-label">Email Terdaftar</label>
                            <input type="email" class="form-control" id="forgotEmail" required>
                            <small class="text-muted">Kami akan mengirimkan link reset password ke email Anda</small>
                        </div>
                        <button type="submit" class="btn btn-primary w-100">Kirim Link Reset</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->

    <script>
        // Data Restoran & Cafe dari Solo
        const places = [
            // Cafe (25)
             {id: 1, name: "Kelana", type: "cafe", description: "Cafe cozy dengan suasana hangat dan kopi berkualitas", address: "Jl. Mentri Supeno No. 11, Manahan, Kec. Banjarsari, Kota Surakarta, Jawa Tengah, 57139", phone: "0271-1234567", images: ["Asset Cafe/11. kelana/gambar41.jpg", "Asset Cafe/11. kelana/gambar42.jpg", "Asset Cafe/11. kelana/gambar43.jpg"]},
            {id: 2, name: "Communion", type: "cafe", description: "Tempat berkumpul dengan coffee specialty dan makanan enak", address: "Jl. Brigjen Slamet Riyadi No. 61, Kauman, Kec. Ps. Kliwon, Kota Surakarta, Jawa Tengah, 57122, Solo", phone: "0271-2345678", images: ["Asset Cafe/5. Communion/gambar13.jpg", "Asset Cafe/5. Communion/gambar14.jpg", "Asset Cafe/5. Communion/gambar15.jpg"]},
            {id: 3, name: "Oxyco Coffee Shop", type: "cafe", description: "Coffee shop modern dengan interior minimalis", address: "Soba Bisnis Square Ruko Narendra JD-23 Solo Baru, Kabupaten Sukoharjo, Jawa Tengah 57552", phone: "0271-3456789", images: ["Asset Cafe/15. Oxyco coffee/gambar67.jpg", "Asset Cafe/15. Oxyco coffee/gambar68.jpg", "Asset Cafe/15. Oxyco coffee/gambar69.jpg"]},
            {id: 4, name: "Dante", type: "cafe", description: "Cafe instagramable dengan menu beragam", address: "Jl. Slamet Riyadi No. 473, Pajang, Kec. Laweyan, Kota Surakarta, Jawa Tengah 57146", phone: "0271-4567890", images: ["Asset Cafe/22.Dante/gambar96.jpg", "Asset Cafe/22.Dante/gambar97.jpg", "Asset Cafe/22.Dante/gambar98.jpg"]},
            {id: 5, name: "Kalagyan", type: "cafe", description: "Cafe dengan konsep unik dan menu kreatif", address: "Jl. Slamet Riyadi No. 11, Kauman, Kec. Ps. Kliwon, Kota Surakarta, Jawa Tengah 57122", phone: "0271-5678901", images: ["Asset Cafe/8. KALAGYAN/gambar26.jpg", "Asset Cafe/8. KALAGYAN/gambar27.jpg", "Asset Cafe/8. KALAGYAN/gambar28.jpg"]},
            {id: 6, name: "Seperdua", type: "cafe", description: "Coffee and eatery dengan suasana nyaman", address: "Jl. Yos Sudarso No. 233, Kratonan, Kec. Serengan, Kota Surakarta, Jawa Tengah 57153", phone: "0271-6789012", images: ["Asset Cafe/17. SEPERDUA/gambar78.jpg", "Asset Cafe/17. SEPERDUA/gambar75.jpg", "Asset Cafe/17. SEPERDUA/gambar76.jpg"]},
            {id: 7, name: "Kavelokka", type: "cafe", description: "Cafe aesthetic dengan menu fusion", address: "Jl. Slamet Riyadi No. , 151, Kemiayan, Kec. Serengan, Kota Surakarta, Jawa Tengah 57151", phone: "0271-7890123", images: ["Asset Cafe/9. KAVELOKKA/gambar34.jpg", "Asset Cafe/9. KAVELOKKA/gambar33.jpg", "Asset Cafe/9. KAVELOKKA/gambar35.jpg"]},
            {id: 8, name: "Slari Coffee", type: "cafe", description: "Specialty coffee dengan biji kopi pilihan", address: "Jl. Slamet Riyadi No. 111, Kemiayan, Kec. Serengan, Kota Surakarta, Jawa Tengah 57151", phone: "0271-8901234", images: ["Asset Cafe/18. SLARI COFFEE/gambar81.jpg", "Asset Cafe/18. SLARI COFFEE/gambar79.jpg", "Asset Cafe/18. SLARI COFFEE/gambar84.jpg"]},
            {id: 9, name: "Kopi Nako", type: "cafe", description: "Kopi lokal dengan cita rasa khas Solo", address: "Jl. Kalitan No.1 Penumping, Kota Surakarta, Jawa Tengah 57141", phone: "0271-9012345", images: ["Asset Cafe/12. KOPI NAKO/gambar47.jpg", "Asset Cafe/12. KOPI NAKO/gambar46.jpg", "Asset Cafe/12. KOPI NAKO/gambar50.jpg"]},
            {id: 10, name: "Kagumi", type: "cafe", description: "Cafe romantis dengan pemandangan indah", address: "Jl. Yosodipuro No. 49, Timuran, Kec. Banjarsari, Kota Surakarta, Jawa Tengah 57131", phone: "0271-0123456", images: ["Asset Cafe/7. KAGUMI/gambar22.jpg", "Asset Cafe/7. KAGUMI/gambar20.jpg", "Asset Cafe/7. KAGUMI/gambar21.jpg"]},
            {id: 11, name: "Kawan Tuli", type: "cafe", description: "Cafe inklusif dengan pelayanan ramah", address: "Jl. Ronggowarsito No. 16, Kp Baru, Kec. Ps. Kliwon, Kota Surakarta, Jawa Tengah 57133", phone: "0271-1122334", images: ["Asset Cafe/10. Kawan Tuli Coffee & Space/gambar39.jpg", "Asset Cafe/10. Kawan Tuli Coffee & Space/gambar36.jpg"]},
            {id: 12, name: "Sawahita", type: "cafe", description: "Cafe dengan konsep sawah dan natural", address: "Kerten, Kec. Laweyan, Kota Surakarta, Jwa Tengah", phone: "0271-2233445", images: ["Asset Cafe/16. Sawahita/gambar71.jpg", "Asset Cafe/16. Sawahita/gambar72.jpg", "Asset Cafe/16. Sawahita/gambar73.jpg"]},
            {id: 13, name: "Cold 'N Brew", type: "cafe", description: "Spesialis cold brew dengan rasa smooth", address: "Dusun I, Madegondo, Kec. Grogol, Kabupaten Sukoharjo, Jawa Tengah 57552", phone: "0271-3344556", images: ["Asset Cafe/4. cold n brew/gambar10.jpg", "Asset Cafe/4. cold n brew/gambar11.jpg", "Asset Cafe/4. cold n brew/gambar12.jpg"]},
            {id: 14, name: "Kopi Parang", type: "cafe", description: "Kopi dengan karakter kuat dan berani", address: "Jl. Parang Klitik I No. 10, Sondakan, Kec. Laweyan, Kota Surakarta, Jawa Tengah 57147", phone: "0271-4455667", images: ["Asset Cafe/13. Kopi Parang/gambar56.jpg", "Asset Cafe/13. Kopi Parang/gambar57.jpg", "Asset Cafe/13. Kopi Parang/gambar58.jpg"]},
            {id: 15, name: "Tetra", type: "cafe", description: "Cafe modern dengan teknologi ordering canggih", address: "Jl. Slamet Riyadi No. 560, Jajar, Kec. Laweyan, Kota Surakarta, Jawa Tengah 57146", phone: "0271-5566778", images: ["Asset Cafe/19. Tetra/gambar85.jpg", "Asset Cafe/19. Tetra/gambar86.jpg", "Asset Cafe/19. Tetra/gambar87.jpg"]},
            {id: 16, name: "Anak Panah", type: "cafe", description: "Cafe unik dengan tema panahan", address: "Jl. Ronggowarsito No. 57, Keprabonan, Kec. Banjarsari, Kota Surakarta, Jawa Tengah 57131", phone: "0271-6677889", images: ["Asset Cafe/21.Anak Panah/gambar94.jpg", "Asset Cafe/21.Anak Panah/gambar95.jpg"]},
            {id: 17, name: "The Hidden Swargi Coffee", type: "cafe", description: "Hidden gem dengan kopi premium", address: "Jl. Jegeran No. 1 RT03, RW04, Ketelan, Kec. Banjarsari, Kota Surakarta, Jawa Tengah 57132", phone: "0271-7788990", images: ["Asset Cafe/20. The Hidden Swargi Coffee/gambar89.jpg", "Asset Cafe/20. The Hidden Swargi Coffee/gambar92.jpg", "Asset Cafe/20. The Hidden Swargi Coffee/gambar93.jpg"]},
            {id: 18, name: "Catniphora", type: "cafe", description: "Cat cafe dengan kucing lucu dan menggemaskan", address: "Jl. Depok No. 1, Manahan, Kec. Banjasari, Kota Surakarta, Jawa Tengah, 57139", phone: "0271-8899001", images: ["Asset Cafe/24.Catniphora/c1.jpg", "Asset Cafe/24.Catniphora/c3.jpg"]},
            {id: 19, name: "Antara Kata", type: "cafe", description: "Book cafe dengan koleksi buku menarik", address: "Jl. Moh. Saleh Wedisastro No. 2A, Setabelan, Kec. Banjasari, Kota Surakarta, Jawa Tengah 57139", phone: "0271-9900112", images: ["Asset Cafe/23.AntaraKata/gambar101.jpg", "Asset Cafe/23.AntaraKata/gambar102.jpg", "Asset Cafe/23.AntaraKata/gambar100.jpg"]},
            {id: 20, name: "18 Grounds Coffee", type: "cafe", description: "Coffee shop dengan berbagai pilihan bean", address: "Jl. Honggowongso No. 78G, Panularan, Kec. Laweyan, Kota Surakarta, Jawa Tengah 57149", phone: "0271-0011223", images: ["Asset Cafe/1. 18 Grounds Coffee/gambar1.jpg", "Asset Cafe/1. 18 Grounds Coffee/gambar2.jpg"]},
            {id: 21, name: "Odds Coffee Company", type: "cafe", description: "Specialty coffee dengan brewing method lengkap", address: "Jl. Slamet Riyadi No. 241, Kemlayan, Kec. Serengan, Kota Surakarta, Jawa Tengah 57151", phone: "0271-1122334", images: ["Asset Cafe/14. Odds/gambar61.jpg", "Asset Cafe/14. Odds/gambar62.jpg", "Asset Cafe/14. Odds/gambar63.jpg"]},
            {id: 22, name: "Gettsee", type: "cafe", description: "Cafe hangout dengan menu western", address: "Jl. Slamet Riyadi No. 268 Rt06/04, Timuran, Kec. Banjasari, Kota Surakarta, Jawa Tengah 57714", phone: "0271-2233445", images: ["Asset Cafe/6. Gettsee/gambar18.jpg", "Asset Cafe/6. Gettsee/gambar19.jpg", "Asset Cafe/6. Gettsee/gambar17.jpg"]},
            {id: 23, name: "25 Coffee", type: "cafe", description: "Coffee bar dengan atmosphere modern", address: "Jl. Imam Bonjol No. 55, Kp. Baru, Kec. Ps. Kliwon, Kota Surakarta, Jawa Tengah 57133", phone: "0271-3344556", images: ["Asset Cafe/2. 25 Coffee/gambar3.jpg", "Asset Cafe/2. 25 Coffee/gambar4.jpg", "Asset Cafe/2. 25 Coffee/gambar5.jpg"]},
            {id: 24, name: "Bahagia Bersama", type: "cafe", description: "Cafe family friendly dengan playground", address: "Jl. Yos. Sudarso No. 81, Kumanan, Kec. Ps. Kliwon, Kota Surakarta, Jawa Tengah 57151", phone: "0271-4455667", images: ["Asset Cafe/3. Bahagia Bersama/gambar6.jpg", "Asset Cafe/3. Bahagia Bersama/gambar7.jpg"]},
            {id: 25, name: "Sosiallatte", type: "cafe", description: "Cabang kedua dengan konsep lebih luas", address: "Jl. Mawar No. 7b, RT4/RW. 5, Mangkubumen, Kec. Banjasari, Kota Surakarta 57139", phone: "0271-5566778", images: ["Asset Cafe/25.sosiallatte/gambar110.jpg", "Asset Cafe/25.sosiallatte/gambar111.jpg", "Asset Cafe/25.sosiallatte/gambar112.jpg"]},
            
            // Restoran (24)
            {id: 26, name: "Xin Xin Resto", type: "restaurant", description: "Restoran Chinese food halal dengan cita rasa autentik", address: "Jl. Diponegoro No. 42, Solo", phone: "0271-1234501", images: ["Asset Resto/1. xin xin resto/ft 1.jpg", "Asset Resto/1. xin xin resto/ft 2.jpg", "Asset Resto/1. xin xin resto/ft 3.jpg"]},
            {id: 27, name: "Orient Resto", type: "restaurant", description: "Masakan oriental dengan bumbu khas", address: "Jl. Slamet Riyadi No. 88, Solo", phone: "0271-2345602", images: ["Asset Resto/2. orint resto/ft 6.jpg", "Asset Resto/2. orint resto/ft 7.jpg"]},
            {id: 28, name: "Kampung Kecil Solo", type: "restaurant", description: "Restoran konsep kampung dengan menu tradisional", address: "Jl. Yos Sudarso No. 15, Solo", phone: "0271-3456703", images: ["Asset Resto/3. kampung kecil solo/ft 8.jpg", "Asset Resto/3. kampung kecil solo/ft 9.jpg", "Asset Resto/3. kampung kecil solo/ft 10.jpg"]},
            {id: 29, name: "Omah Sinten Heritage Resto", type: "restaurant", description: "Restoran heritage Jawa dengan suasana klasik", address: "Jl. Veteran No. 25, Solo", phone: "0271-4567804", images: ["Asset Resto/4. omah sinten heritage resto/ft 11.jpg", "Asset Resto/4. omah sinten heritage resto/ft 12.jpg", "Asset Resto/4. omah sinten heritage resto/ft 13.jpg" ]},
            {id: 30, name: "Ayam Malioboro", type: "restaurant", description: "Spesialis ayam dengan bumbu istimewa", address: "Jl. Dr. Radjiman No. 99, Solo", phone: "0271-5678905", images: ["Asset Resto/5. ayam malioboro/ft 14.jpg", "Asset Resto/5. ayam malioboro/ft 15.jpg", "Asset Resto/5. ayam malioboro/ft 16.jpg"]},
            {id: 31, name: "Botania", type: "restaurant", description: "Restoran dengan konsep taman botanis", address: "Jl. Ahmad Yani No. 77, Solo", phone: "0271-6789006", images: ["Asset Resto/6. botania/ft 17.jpg", "Asset Resto/6. botania/ft 18.jpg", "Asset Resto/6. botania/ft 19.jpg"]},
            {id: 32, name: "Djampi Jawi Solo", type: "restaurant", description: "Masakan Jawa dengan resep turun temurun", address: "Jl. Adisucipto No. 33, Solo", phone: "0271-7890107", images: ["Asset Resto/7. djampi jawi solo/ft 20.jpg", "Asset Resto/7. djampi jawi solo/ft 21.jpg", "Asset Resto/7. djampi jawi solo/ft 22.jpg"]},
            {id: 33, name: "Double Decker", type: "restaurant", description: "Restoran bertingkat dengan menu beragam", address: "Jl. Monginsidi No. 55, Solo", phone: "0271-8901208", images: ["Asset Resto/8. double decker/ft 24.jpg", "Asset Resto/8. double decker/ft 25.jpg", "Asset Resto/8. double decker/ft 26.jpg"]},
            {id: 34, name: "Adem Ayem Resto Slamet Riyadi", type: "restaurant", description: "Restoran dengan suasana adem dan tenang", address: "Jl. Sudirman No. 111, Solo", phone: "0271-9012309", images: ["Asset Resto/9. adem ayem resto slamet riyadi/ft 28.jpg", "Asset Resto/9. adem ayem resto slamet riyadi/ft 29.jpg"]},
            {id: 35, name: "Armey Kitchen", type: "restaurant", description: "Kitchen modern dengan menu fusion", address: "Jl. Gajah Mada No. 22, Solo", phone: "0271-0123410", images: ["Asset Resto/10. armey kitchen/ft 30.jpg", "Asset Resto/10. armey kitchen/ft 31.jpg"]},
            {id: 36, name: "Ayam Goreng Kartini", type: "restaurant", description: "Ayam goreng legendaris dengan bumbu rahasia", address: "Jl. Honggowongso No. 44, Solo", phone: "0271-1122311", images: ["Asset Resto/11. ayam goreng kartini/ft 32.jpg", "Asset Resto/11. ayam goreng kartini/ft 33.jpg", "Asset Resto/11. ayam goreng kartini/ft 34.jpg"]},
            {id: 37, name: "Balekambang Resto", type: "restaurant", description: "Restoran pinggir kolam dengan view indah", address: "Jl. Urip Sumoharjo No. 66, Solo", phone: "0271-2233412", images: ["Asset Resto/12. balekambang resto/ft 35.jpg", "Asset Resto/12. balekambang resto/ft 36.jpg", "Asset Resto/12. balekambang resto/ft 37.jpg"]},
            {id: 38, name: "Canting Londo Kitchen", type: "restaurant", description: "Fusion food Indonesia dan Western", address: "Jl. Dr. Moewardi No. 88, Solo", phone: "0271-3344513", images: ["Asset Resto/13. canting londo kitchen/ft 39.jpg", "Asset Resto/13. canting londo kitchen/ft 40.jpg", "Asset Resto/13. canting londo kitchen/ft 41.jpg"]},
            {id: 39, name: "Kusuma Sari Restaurant", type: "restaurant", description: "Restoran keluarga dengan menu komplit", address: "Jl. Ki Hajar Dewantara No. 99, Solo", phone: "0271-4455614", images: ["Asset Resto/14. kusuma sari restaurant/ft 43.jpg", "Asset Resto/14. kusuma sari restaurant/ft 44.jpg", "Asset Resto/14. kusuma sari restaurant/ft 45.jpg"]},
            {id: 40, name: "Le Verre Resto dan Lounge", type: "restaurant", description: "Fine dining dengan suasana elegan", address: "Jl. Brigjen Sudiarto No. 111, Solo", phone: "0271-5566715", images: ["Asset Resto/15. le verre resto dan lounge/ft 47.jpg", "Asset Resto/15. le verre resto dan lounge/ft 48.jpg", "Asset Resto/15. le verre resto dan lounge/ft 49.jpg"]},
            {id: 41, name: "Mang Engking Solo", type: "restaurant", description: "Restoran Sunda dengan ikan bakar segar", address: "Jl. Adi Sumarmo No. 33, Solo", phone: "0271-6677816", images: ["Asset Resto/16. mang engking solo/ft 51.jpg", "Asset Resto/16. mang engking solo/ft 52.jpg", "Asset Resto/16. mang engking solo/ft 53.jpg" ]},
            {id: 42, name: "Mangano", type: "restaurant", description: "Restoran Italia dengan pasta dan pizza", address: "Jl. Gatot Subroto No. 55, Solo", phone: "0271-7788917", images: ["Asset Resto/17. mangano/ft 54.jpg", "Asset Resto/17. mangano/ft 55.jpg", "Asset Resto/17. mangano/ft 56.jpg"]},
            {id: 43, name: "Pracima Tuin Pura Mangkunegaran", type: "restaurant", description: "Restoran di area keraton dengan menu royal", address: "Pura Mangkunegaran, Solo", phone: "0271-8899018", images: ["Asset Resto/18. pracima tuin pura mangkunegaran/ft 57.jpg", "Asset Resto/18. pracima tuin pura mangkunegaran/ft 58.jpg", "Asset Resto/18. pracima tuin pura mangkunegaran/ft 58.jpg"]},
            {id: 44, name: "Ramayana", type: "restaurant", description: "Selat solo legendaris dengan tenda biru ikonik", address: "Jl. Jend Sudirman No. 22, Solo", phone: "0271-9900119", images: ["Asset Resto/19. ramayana/ft 63.jpg", "Asset Resto/19. ramayana/ft 62.jpg", "Asset Resto/19. ramayana/ft 61.jpg"]},
            {id: 45, name: "Selat Solo Tenda Biru", type: "restaurant", description: "Selat solo legendaris dengan tenda biru ikonik", address: "Jl. Jend Sudirman No. 22, Solo", phone: "0271-9900119", images: ["Asset Resto/20. selat solo tenda biru/ft 64.jpg", "Asset Resto/20. selat solo tenda biru/ft 65.jpg", "Asset Resto/20. selat solo tenda biru/ft 66.jpg"]},
            {id: 46, name: "Selera Jawa Sunda", type: "restaurant", description: "Perpaduan masakan Jawa dan Sunda", address: "Jl. Juanda No. 44, Solo", phone: "0271-0011220", images: ["Asset Resto/21.selera jawa sunda/ft 67.jpg", "Asset Resto/21.selera jawa sunda/ft 68.jpg", "Asset Resto/21.selera jawa sunda/ft 69.jpg"]},
            {id: 47, name: "Solo's Bistro", type: "restaurant", description: "Bistro modern dengan menu internasional", address: "Jl. Brigjend Katamso No. 66, Solo", phone: "0271-1122321", images: ["Asset Resto/22.solo's bistro/ft 71.jpg", "Asset Resto/22.solo's bistro/ft 72.jpg", "Asset Resto/22.solo's bistro/ft 73.jpg"]},
            {id: 48, name: "The Soga Eatery", type: "restaurant", description: "Eatery dengan konsep instagramable", address: "Jl. Letjen Suprapto No. 88, Solo", phone: "0271-2233422", images: ["Asset Resto/23.the soga eatery/ft 76.jpg", "Asset Resto/23.the soga eatery/ft 77.jpg", "Asset Resto/23.the soga eatery/ft 78.jpg"]},
            {id: 49, name: "Vien's", type: "restaurant", description: "Restoran Vietnam dengan pho autentik", address: "Jl. Raya Solo-Sragen No. 99, Solo", phone: "0271-3344523", images: ["Asset Resto/24.vien's/ft 79.jpg", "Asset Resto/24.vien's/ft 80.jpg", "Asset Resto/24.vien's/ft 81.jpg"]},
            {id: 49, name: "Yassalam Resto Solo", type: "restaurant", description: "Restoran Middle East dengan kebab dan shawarma", address: "Jl. Veteran No. 33, Solo", phone: "0271-4455624", images: ["Asset Resto/25.yassalam resto solo/ft 82.jpg", "Asset Resto/25.yassalam resto solo/ft 83.jpg", "Asset Resto/25.yassalam resto solo/ft 84.jpg"]},
        ];

        // Navigation to Login from Welcome Page
        function goToLogin() {
    updateNavbar("login");

    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('loginPage').classList.add('active');
}

        // Authentication Functions
        function hashPassword(password) {
            return btoa(password);
        }

        function register(e) {
            e.preventDefault();
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const phone = document.getElementById('regPhone').value;
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;

            if (password !== confirmPassword) {
                alert('Password tidak cocok!');
                return;
            }

            if (password.length < 6) {
                alert('Password minimal 6 karakter!');
                return;
            }

            let users = JSON.parse(localStorage.getItem('users') || '[]');
            
            if (users.find(u => u.email === email)) {
                alert('Email sudah terdaftar!');
                return;
            }

            users.push({
                name,
                email,
                phone,
                password: hashPassword(password),
                createdAt: new Date().toISOString()
            });

            localStorage.setItem('users', JSON.stringify(users));
            alert('Registrasi berhasil! Silakan login.');
            showLoginPage();
        }

        function login(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;

            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === hashPassword(password));

            if (!user) {
                alert('Email atau password salah!');
                return;
            }

            const session = {
                email: user.email,
                name: user.name,
                phone: user.phone,
                loginTime: new Date().toISOString(),
                rememberMe: rememberMe
            };

            localStorage.setItem('session', JSON.stringify(session));
            loadUserData();
            updateNavbar("main");
            showPage('home');
        }

        function logout() {
    localStorage.removeItem("session");
    updateNavbar("welcome");
    showWelcomePage();
        }

        function showWelcomePage() {
    document.body.classList.add('welcome-mode');
    document.getElementById('mainNavbar').classList.remove('d-none');

    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('welcomePage').classList.add('active');
}
        
        function checkSession() {
            const session = JSON.parse(localStorage.getItem('session') || 'null');
            if (session && session.rememberMe) {
                loadUserData();
                showPage('home');
            } else {
                showWelcomePage();
            }
        }

        function loadUserData() {
            const session = JSON.parse(localStorage.getItem('session') || 'null');
            if (session) {
                document.getElementById('profileName').textContent = session.name;
                document.getElementById('profileEmail').textContent = session.email;
                document.getElementById('profilePhone').textContent = session.phone;
                document.getElementById('profileImage').src = `https://ui-avatars.com/api/?name=${encodeURIComponent(session.name)}&size=120&background=03A6A6&color=fff`;
            }
        }

        function showEditProfile() {
            const session = JSON.parse(localStorage.getItem('session') || 'null');
            if (session) {
                document.getElementById('editName').value = session.name;
                document.getElementById('editEmail').value = session.email;
                document.getElementById('editPhone').value = session.phone;
                new bootstrap.Modal(document.getElementById('editProfileModal')).show();
            }
        }

        function updateProfile(e) {
            e.preventDefault();
            const name = document.getElementById('editName').value;
            const email = document.getElementById('editEmail').value;
            const phone = document.getElementById('editPhone').value;

            const session = JSON.parse(localStorage.getItem('session'));
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            const userIndex = users.findIndex(u => u.email === session.email);
            if (userIndex !== -1) {
                users[userIndex].name = name;
                users[userIndex].email = email;
                users[userIndex].phone = phone;
                localStorage.setItem('users', JSON.stringify(users));
                
                session.name = name;
                session.email = email;
                session.phone = phone;
                localStorage.setItem('session', JSON.stringify(session));
                
                loadUserData();
                bootstrap.Modal.getInstance(document.getElementById('editProfileModal')).hide();
                alert('Profile berhasil diperbarui!');
            }
        }

        function showForgotPassword() {
            new bootstrap.Modal(document.getElementById('forgotPasswordModal')).show();
        }

        function resetPassword(e) {
            e.preventDefault();
            const email = document.getElementById('forgotEmail').value;
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            if (users.find(u => u.email === email)) {
                alert('Link reset password telah dikirim ke email Anda! (Simulasi)');
                bootstrap.Modal.getInstance(document.getElementById('forgotPasswordModal')).hide();
            } else {
                alert('Email tidak terdaftar!');
            }
        }

        // Page Navigation
        function showPage(pageName) {
  document.body.classList.remove('welcome-mode');

  // NAVBAR HARUS MUNCUL
  showNavbar();

  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));

  if (pageName === 'home') {
    document.getElementById('homePage').classList.add('active');
    renderPlaces();
  }

  if (pageName === 'mybooking') {
    document.getElementById('mybookingPage').classList.add('active');
    renderBookings();
  }

  if (pageName === 'profile') {
    document.getElementById('profilePage').classList.add('active');
    loadUserData();
  }
}

        function backToHome() {
            showPage('home');
            if (pageName === 'home') {
    document.getElementById('homePage').classList.add('active');
    renderPlaces();

    setTimeout(() => {
        initTabs();
    }, 50);
}
        }

        function showLoginPage() {
    document.body.classList.remove('welcome-mode');
    document.getElementById('mainNavbar').classList.add('d-none');

    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('loginPage').classList.add('active');
}

        function showRegisterPage() {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById('registerPage').classList.add('active');
        }

        // Render Places
        function renderPlaces() {
            const restaurants = places.filter(p => p.type === 'restaurant');
            const cafes = places.filter(p => p.type === 'cafe');
            const allPlaces = [...restaurants.slice(0, 10), ...cafes.slice(0, 10)];

            document.getElementById('allPlaces').innerHTML = allPlaces.map(place => createPlaceCard(place)).join('');
            document.getElementById('restaurantList').innerHTML = restaurants.map(place => createPlaceCard(place)).join('');
            document.getElementById('cafeList').innerHTML = cafes.map(place => createPlaceCard(place)).join('');
        }

        function createPlaceCard(place) {
            return `
                <div class="col-md-6 col-lg-4 mb-3">
                    <div class="card restaurant-card" onclick="showDetail(${place.id})">
                        <img src="${place.images[0]}" class="card-img-top" alt="${place.name}">
                        <div class="card-body">
                            <h5 class="card-title">${place.name}</h5>
                            <p class="card-text text-muted">${place.description.substring(0, 60)}...</p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="badge bg-primary">${place.type === 'restaurant' ? 'Restoran' : 'Cafe'}</span>
                                <small><i class="bi bi-geo-alt"></i> Solo</small>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Detail Functions
        let currentPlace = null;

        function showDetail(placeId) {
            currentPlace = places.find(p => p.id === placeId);
            if (!currentPlace) return;

            const carouselInner = document.getElementById('detailCarouselInner');
            carouselInner.innerHTML = currentPlace.images.map((img, index) => `
                <div class="carousel-item ${index === 0 ? 'active' : ''}">
                    <img src="${img}" class="d-block w-100 detail-carousel" alt="${currentPlace.name}">
                </div>
            `).join('');

            document.getElementById('detailContent').innerHTML = `
                <h3>${currentPlace.name}</h3>
                <span class="badge badge-custom bg-primary mb-3">${currentPlace.type === 'restaurant' ? 'Restoran' : 'Cafe'}</span>
                <p>${currentPlace.description}</p>
                <hr>
                <p><i class="bi bi-geo-alt-fill text-primary"></i> <strong>Alamat:</strong><br>${currentPlace.address}</p>
                <p><i class="bi bi-telephone-fill text-primary"></i> <strong>Telepon:</strong><br>${currentPlace.phone}</p>
            `;

            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.getElementById('detailPage').classList.add('active');
        }

        // Booking Functions
        function showBookingForm() {
            if (!currentPlace) return;

            document.getElementById('bookingPlaceId').value = currentPlace.id;
            document.getElementById('bookingPlaceName').value = currentPlace.name;
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('bookingDate').setAttribute('min', today);

            new bootstrap.Modal(document.getElementById('bookingModal')).show();
        }

        function saveBooking(e) {
            e.preventDefault();

            const booking = {
                id: Date.now(),
                placeId: parseInt(document.getElementById('bookingPlaceId').value),
                placeName: document.getElementById('bookingPlaceName').value,
                date: document.getElementById('bookingDate').value,
                time: document.getElementById('bookingTime').value,
                people: document.getElementById('bookingPeople').value,
                notes: document.getElementById('bookingNotes').value,
                status: 'upcoming',
                bookingCode: 'BK' + Date.now().toString().substring(7),
                createdAt: new Date().toISOString()
            };

            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            bookings.push(booking);
            localStorage.setItem('bookings', JSON.stringify(bookings));

            bootstrap.Modal.getInstance(document.getElementById('bookingModal')).hide();
            alert('Reservasi berhasil dibuat!');
            document.getElementById('bookingForm').reset();
            showPage('mybooking');
        }

        function renderBookings() {
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            
            const upcoming = bookings.filter(b => b.status === 'upcoming');
            const completed = bookings.filter(b => b.status === 'completed');
            const cancelled = bookings.filter(b => b.status === 'cancelled');

            document.getElementById('upcomingBookings').innerHTML = upcoming.length > 0 
                ? upcoming.map(b => createBookingCard(b)).join('') 
                : '<p class="text-center text-muted">Belum ada booking</p>';

            document.getElementById('completedBookings').innerHTML = completed.length > 0 
                ? completed.map(b => createBookingCard(b)).join('') 
                : '<p class="text-center text-muted">Belum ada booking selesai</p>';

            document.getElementById('cancelledBookings').innerHTML = cancelled.length > 0 
                ? cancelled.map(b => createBookingCard(b)).join('') 
                : '<p class="text-center text-muted">Belum ada booking dibatalkan</p>';
        }

        function createBookingCard(booking) {
            const statusBadge = {
                'upcoming': '<span class="badge bg-primary">Akan Datang</span>',
                'completed': '<span class="badge" style="background-color: var(--success); color: var(--secondary)">Selesai</span>',
                'cancelled': '<span class="badge bg-danger">Dibatalkan</span>'
            };

            return `
                <div class="card booking-card ${booking.status} mb-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h5 class="card-title mb-0">${booking.placeName}</h5>
                            ${statusBadge[booking.status]}
                        </div>
                        <p class="mb-1"><i class="bi bi-calendar"></i> ${formatDate(booking.date)} - ${booking.time}</p>
                        <p class="mb-2"><i class="bi bi-people"></i> ${booking.people} Orang</p>
                        <p class="mb-2"><small class="text-muted">Kode Booking: ${booking.bookingCode}</small></p>
                        <button class="btn btn-sm btn-outline-primary" onclick="showBookingDetail(${booking.id})">
                            Lihat Detail
                        </button>
                    </div>
                </div>
            `;
        }

        function showBookingDetail(bookingId) {
            const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
            const booking = bookings.find(b => b.id === bookingId);
            if (!booking) return;

            const place = places.find(p => p.id === booking.placeId);

            document.getElementById('bookingDetailContent').innerHTML = `
                <div class="text-center mb-3">
                    <img src="${place.images[0]}" class="img-fluid rounded" style="max-height: 300px; object-fit: cover; aspect-ratio: 1/2;" alt="${booking.placeName}">
                </div>
                <h5>${booking.placeName}</h5>
                <hr>
                <p><strong>Tanggal:</strong> ${formatDate(booking.date)}</p>
                <p><strong>Waktu:</strong> ${booking.time}</p>
                <p><strong>Jumlah Orang:</strong> ${booking.people} orang</p>
                <p><strong>Status:</strong> <span class="badge ${booking.status === 'upcoming' ? 'bg-primary' : booking.status === 'completed' ? 'bg-success' : 'bg-danger'}">${booking.status === 'upcoming' ? 'Akan Datang' : booking.status === 'completed' ? 'Selesai' : 'Dibatalkan'}</span></p>
                <p><strong>Kode Booking:</strong> ${booking.bookingCode}</p>
                ${booking.notes ? `<p><strong>Catatan:</strong> ${booking.notes}</p>` : ''}
                <hr>
                <div class="qr-code">
                    <div class="text-center">
                        <i class="bi bi-qr-code" style="font-size: 100px; color: #ccc;"></i>
                        <p class="text-muted mt-2">QR Code Check-in</p>
                    </div>
                </div>
                ${booking.status === 'upcoming' ? `
                    <button class="btn btn-danger w-100 mt-3" onclick="cancelBooking(${booking.id})">
                        <i class="bi bi-x-circle"></i> Batalkan Reservasi
                    </button>
                ` : ''}
            `;

            new bootstrap.Modal(document.getElementById('bookingDetailModal')).show();
        }

        function cancelBooking(bookingId) {
            if (confirm('Yakin ingin membatalkan reservasi ini?')) {
                const bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
                const bookingIndex = bookings.findIndex(b => b.id === bookingId);
                if (bookingIndex !== -1) {
                    bookings[bookingIndex].status = 'cancelled';
                    localStorage.setItem('bookings', JSON.stringify(bookings));
                    bootstrap.Modal.getInstance(document.getElementById('bookingDetailModal')).hide();
                    renderBookings();
                    alert('Reservasi berhasil dibatalkan');
                }
            }
        }

        // Search Function
        function showSearchModal() {
            new bootstrap.Modal(document.getElementById('searchModal')).show();
            document.getElementById('searchInput').focus();
        }

        document.getElementById('searchInput').addEventListener('input', function(e) {
            const query = e.target.value.toLowerCase();
            if (query.length < 2) {
                document.getElementById('searchResults').innerHTML = '';
                return;
            }

            const results = places.filter(p => 
                p.name.toLowerCase().includes(query) || 
                p.description.toLowerCase().includes(query)
            );

            if (results.length === 0) {
                document.getElementById('searchResults').innerHTML = '<p class="text-muted text-center">Tidak ada hasil</p>';
                return;
            }

            document.getElementById('searchResults').innerHTML = results.map(place => `
                <div class="card mb-2" onclick="showDetail(${place.id}); bootstrap.Modal.getInstance(document.getElementById('searchModal')).hide();" style="cursor: pointer;">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-3">
                                <img src="${place.images[0]}" class="img-fluid rounded" alt="${place.name}">
                            </div>
                            <div class="col-9">
                                <h6 class="mb-1">${place.name}</h6>
                                <small class="text-muted">${place.description.substring(0, 50)}...</small>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        });

        // Dark Mode Functions
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDark);
            
            const icon = document.querySelector('#darkModeBtn i');
            if (isDark) {
                icon.classList.remove('bi-moon-fill');
                icon.classList.add('bi-sun-fill');
            } else {
                icon.classList.remove('bi-sun-fill');
                icon.classList.add('bi-moon-fill');
            }
        }

        function loadDarkMode() {
            const isDark = localStorage.getItem('darkMode') === 'true';
            if (isDark) {
                document.body.classList.add('dark-mode');
                const icon = document.querySelector('#darkModeBtn i');
                icon.classList.remove('bi-moon-fill');
                icon.classList.add('bi-sun-fill');
            }
        }

        // Utility Functions
        function formatDate(dateString) {
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('id-ID', options);
        }

        // Auto Carousel
        const promoCarousel = new bootstrap.Carousel(document.getElementById('promoCarousel'), {
            interval: 3000,
            ride: 'carousel'
        });

        // Event Listeners
        document.getElementById('loginForm').addEventListener('submit', login);
        document.getElementById('registerForm').addEventListener('submit', register);
        document.getElementById('bookingForm').addEventListener('submit', saveBooking);
        document.getElementById('editProfileForm').addEventListener('submit', updateProfile);
        document.getElementById('forgotPasswordForm').addEventListener('submit', resetPassword);

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(() => console.log('SW registered!'))
                    .catch(err => console.log('SW gagal:',err));
            }

        if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('service-worker.js')
      .then(reg => console.log('SW registered'))
      .catch(err => console.log('SW failed', err));
  });
}

        // Create Manifest Dynamically
        const manifest = {
            name: "Reservin - Reservasi Restoran Solo",
            short_name: "Reservin",
            description: "Aplikasi reservasi restoran dan cafe di Solo berbasis web dan mobile",
            start_url: "/",
            display: "standalone",
            background_color: "#ffffff",
            theme_color: "#03A6A6",
            icons: [
                {
                    src: "logo/logo6.png",
                    sizes: "192x192",
                    type: "image/png"
                },
                {
                    src: "logo/logo5.png",
                    sizes: "512x512",
                    type: "image/png"
                }
            ]
        };

        const manifestBlob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
        const manifestURL = URL.createObjectURL(manifestBlob);
        document.getElementById('manifest-placeholder').setAttribute('href', manifestURL);

        // Initialize App
        loadDarkMode();
        checkSession();

        function updateNavbar(mode) {
    const navbar = document.getElementById("mainNavbar");
    const navbarNav = document.getElementById("navbarNav");

    if (mode === "welcome") {
        navbar.style.display = "flex";
        navbarNav.style.display = "none";
        navbar.classList.add("justify-content-center");
    }

    if (mode === "login") {
        navbar.style.display = "none";
    }

    if (mode === "main") {
        navbar.style.display = "flex";
        navbarNav.style.display = "flex";
        navbar.classList.remove("justify-content-center");
    }
}

        function updateNavbar(page) {
    const navbar = document.getElementById("mainNavbar");

    if (page === "welcome" || page === "login" || page === "register") {
        navbar.style.display = "none";
        document.body.classList.add("welcome-mode");
    } else {
        navbar.style.display = "flex";
        document.body.classList.remove("welcome-mode");
    }
}
    </script>

    <script>
function showNavbar() {
  const navbar = document.getElementById('mainNavbar');
  if (!navbar) return;

  navbar.classList.remove('d-none');
  navbar.style.display = 'flex';
}

function hideNavbar() {
  const navbar = document.getElementById('mainNavbar');
  if (!navbar) return;

  navbar.classList.add('d-none');
}

document.addEventListener("DOMContentLoaded", () => {
  showNavbar();
});

function showNavbar(mode) {
    const navbar = document.getElementById('mainNavbar');
    const menu = document.getElementById('navbarNav');

    if (mode === 'welcome') {
        navbar.classList.remove('d-none');
        menu.classList.add('d-none');
    }

    if (mode === 'auth') {
        navbar.classList.add('d-none');
    }

    if (mode === 'app') {
        navbar.classList.remove('d-none');
        menu.classList.remove('d-none');
    }
}
</script>

<script>
    function showOfflinePage() {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('offlinePage').classList.add('active');
        document.getElementById('mainNavbar').classList.add('d-none');
    }

    function hideOfflinePage() {
        document.getElementById('offlinePage').classList.remove('active');
        document.getElementById('mainNavbar').classList.remove('d-none');

        // kembali ke halaman awal / home
        checkSession();
    }

    function checkConnection() {
        if (navigator.onLine) {
            hideOfflinePage();
        } else {
            alert("Masih offline. Periksa koneksi Anda.");
        }
    }

    // Event listener otomatis
    window.addEventListener('offline', () => {
        showOfflinePage();
    });

    window.addEventListener('online', () => {
        hideOfflinePage();
    });

    // Cek saat pertama kali load
    updateNavbar("welcome");
    window.addEventListener('load', () => {
        if (!navigator.onLine) {
            showOfflinePage();
        }
    });
</script>

<script>
document.getElementById("loginForm").addEventListener("submit", function(e) {
    e.preventDefault();

    // simulasi login sukses
    updateNavbar("main");
showPage('home');
});

document.addEventListener("DOMContentLoaded", () => {
  const navbar = document.getElementById("mainNavbar");
  if (navbar) {
    navbar.classList.remove("d-none");
  }
});
</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- SCRIPT JAVASCRIPT APLIKASI ANDA (yang sudah ada) -->
    <script>
        // Semua JavaScript Anda yang lama tetap di sini
        // ...
    </script>

   
    
    
    <!--  TAMBAHKAN SERVICE WORKER REGISTRATION -->
    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log(' Service Worker registered successfully:', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log(' New service worker found, installing...');
                            
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    console.log(' New version available!');
                                    
                                    // Show update notification
                                    if (typeof showToast === 'function') {
                                        showToast('Update tersedia! Muat ulang untuk pembaruan.', 'info');
                                    }
                                }
                            });
                        });
                    })
                    .catch(error => {
                        console.error(' Service Worker registration failed:', error);
                    });
            });
        } else {
            console.warn(' Service Worker not supported in this browser');
        }

        // Handle online/offline events
        window.addEventListener('online', () => {
            console.log(' Back online!');
            if (typeof showToast === 'function') {
                showToast('Koneksi internet kembali!', 'success');
            }
        });

        window.addEventListener('offline', () => {
            console.log(' Gone offline!');
            if (typeof showToast === 'function') {
                showToast('Tidak ada koneksi internet', 'error');
            }
        });
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>